## DocumentDB Partitioning Samples
This directory contains code samples for common partitioning scenarios with the .NET SDK. For more details, take a look at [How to partition data in DocumentDB with the .NET SDK](http://azure.microsoft.com/en-us/documentation/articles/documentdb-sharding/). These samples show how to register and use a HashPartitionResolver, a RangePartitionResolver as well as custom IPartitionResolver implementations.

The following samples are included:
* How to specify an arbitrary lambda expression for ExtractPartitionKey and use it to implement compound partitioning keys or to partition different types of objects differently.
* How to create a simple [LookupPartitionResolver]( https://github.com/Azure/azure-documentdb-net/tree/master/samples/partitioning/DocumentDB.Samples.Sharding/DocumentDB.Samples.Sharding/Partitioners/LookupPartitionResolver.cs) that uses a manual lookup table to perform partitioning. This pattern is commonly used for partitioning based on discrete values like region, tenant ID or application name.
* How to create a [ManagedPartitionResolver]( https://github.com/Azure/azure-documentdb-net/tree/master/samples/partitioning/DocumentDB.Samples.Sharding/DocumentDB.Samples.Sharding/Partitioners/ManagedHashPartitionResolver.cs) that creates collections automatically based on a template that defines a naming scheme, IndexingPolicy and stored procedures that need to be registered against new collections.
* How to create a scheme-less [SpilloverPartitionResolver]( https://github.com/Azure/azure-documentdb-net/tree/master/samples/partitioning/DocumentDB.Samples.Sharding/DocumentDB.Samples.Sharding/Partitioners/SpilloverPartitionResolver.cs) that simply creates new collections as the old collections fill up.
* How to serialize and deserialize your PartitionResolver state as JSON, so that you can share between processes and across shutdowns. You can persist these in config files, or even in a DocumentDB collection.
* A [DocumentClientHashPartitioningManager](https://github.com/Azure/azure-documentdb-net/tree/master/samples/partitioning/DocumentDB.Samples.Sharding/DocumentDB.Samples.Sharding/Util/DocumentClientHashPartitioningManager.cs) class for dynamically adding and removing partitions to a database partitioned based on consistent hashing. Internally it uses a [TransitionHashPartitionResolver]( https://github.com/Azure/azure-documentdb-net/tree/master/samples/partitioning/DocumentDB.Samples.Sharding/DocumentDB.Samples.Sharding/Partitioners/TransitionHashPartitionResolver.cs) to route reads and writes during migration using one of four modes - read from the old partitioning scheme (ReadCurrent), the new one (ReadNext), merge results from both (ReadBoth) or be unavailable during migration (None).

The samples are open source and we encourage you to submit pull requests with contributions that could benefit other DocumentDB developers. Please refer to the [Contribution guidelines](https://github.com/Azure/azure-documentdb-net/blob/master/Contributing.md) for guidance on how to contribute.  

**Note:** Collection creates are rate-limited by DocumentDB, so some of the sample methods shown here might take a few minutes to complete...